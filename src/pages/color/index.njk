{% extends "case.njk" %}
{% set title = "Algorithmic Palettes" %}
{% set slug = "appsmith" %}
{% set description = "Magically accessible and harmonious color palettes for UI made from a single* input" %}
{% block colors %}
<style type='text/css'>
    :root {
        --bg: #f2f2f2;
        --fg: #0c2e44;
    }
    .key {
        color: #feaed0;
    }
    .value {
        color: #aaffa9;
    }
    .semi {
        color: #ed9436;
    }
    .case-grid figure.demo {
        flex-direction: row;
    }
    .demo * {
        font-family: sans-serif;
    }
    .demo .slice {
        max-width: 50%;
        display: flex;
        justify-content: center;
        padding: var(--space-3xl) var(--space-l);
    }
    .slice.light {
        background-color: var(--color-light-bg);
    }
    .slice.dark {
        background-color: var(--color-dark-bg);
    }

    .slice button {
        max-width: 16ch;
        border: none;
    }
    .slice.dark button {
        background-color: var(--color-dark-bgAccent);
    }
</style>
{% endblock %}
{% block scripts %}
<script src='https://colorjs.io/dist/color.global.min.js'></script>
<script src='../main.js'></script>
<script>
    function appendCssRules(lightTheme, darkTheme) {
        const root = document.querySelector(':root');

        Object.keys(lightTheme).forEach(tokenKey => {
            const token = lightTheme[tokenKey];
            root.style.setProperty(`--color-light-${tokenKey}`, token);
        });

        Object.keys(darkTheme).forEach(tokenKey => {
            const token = darkTheme[tokenKey];
            root.style.setProperty(`--color-dark-${tokenKey}`, token);
        });
    }

    function handleClick() {
        const inputElement = document.getElementById('myInput');
        const inputValue = inputElement.value;
        const lightTheme = new LightTheme(inputValue).getColors();
        const darkTheme = new DarkTheme(inputValue).getColors();
        appendCssRules(lightTheme, darkTheme);
    }

    // Run on initial page load
    window.addEventListener('DOMContentLoaded', () => {
        const defaultValue = '#000000';
        const inputElement = document.getElementById('myInput');
        inputElement.value = defaultValue;

        const lightTheme = new LightTheme(defaultValue).getColors();
        const darkTheme = new DarkTheme(defaultValue).getColors();
        appendCssRules(lightTheme, darkTheme);
    });
</script>
{% endblock %}
{% block content %}
<input type='text' id='myInput'>
<button onclick='handleClick()'>Apply seed</button>
<figure class='full demo'>
    <div class='slice light'>
        <button>Do the Thing</button>
    </div>
    <div class='slice dark'>
        <button>Do the Thing</button>
    </div>
</figure>
{% endblock %}
